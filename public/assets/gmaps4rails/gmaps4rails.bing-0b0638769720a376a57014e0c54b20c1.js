((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};this.Gmaps4RailsBing=function(a){function c(){c.__super__.constructor.apply(this,arguments),this.map_options={type:"road"},this.markers_conf={infobox:"description"},this.mergeWithDefault("map_options"),this.mergeWithDefault("markers_conf")}return b(c,a),c.prototype.getMapType=function(){switch(this.map_options.type){case"road":return Microsoft.Maps.MapTypeId.road;case"aerial":return Microsoft.Maps.MapTypeId.aerial;case"auto":return Microsoft.Maps.MapTypeId.auto;case"birdseye":return Microsoft.Maps.MapTypeId.birdseye;case"collinsBart":return Microsoft.Maps.MapTypeId.collinsBart;case"mercator":return Microsoft.Maps.MapTypeId.mercator;case"ordnanceSurvey":return Microsoft.Maps.MapTypeId.ordnanceSurvey;default:return Microsoft.Maps.MapTypeId.auto}},c.prototype.createPoint=function(a,b){return new Microsoft.Maps.Point(a,b)},c.prototype.createLatLng=function(a,b){return new Microsoft.Maps.Location(a,b)},c.prototype.createLatLngBounds=function(){},c.prototype.createMap=function(){return new Microsoft.Maps.Map(document.getElementById(this.map_options.id),{credentials:this.map_options.provider_key,mapTypeId:this.getMapType(),center:this.createLatLng(this.map_options.center_latitude,this.map_options.center_longitude),zoom:this.map_options.zoom})},c.prototype.createSize=function(a,b){return new google.maps.Size(a,b)},c.prototype.createMarker=function(a){var b,c;return c=this.createLatLng(a.Lat,a.Lng),b,a.marker_picture===""?b=new Microsoft.Maps.Pushpin(this.createLatLng(a.Lat,a.Lng),{draggable:a.marker_draggable,anchor:this.createImageAnchorPosition(a.Lat,a.Lng),text:a.marker_title}):b=new Microsoft.Maps.Pushpin(this.createLatLng(a.Lat,a.Lng),{draggable:a.marker_draggable,anchor:this.createImageAnchorPosition(a.Lat,a.Lng),icon:a.marker_picture,height:a.marker_height,text:a.marker_title,width:a.marker_width}),this.addToMap(b),b},c.prototype.clearMarkers=function(){var a,b,c,d,e;d=this.markers,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.clearMarker(a));return e},c.prototype.clearMarker=function(a){return this.removeFromMap(a.serviceObject)},c.prototype.showMarkers=function(){var a,b,c,d,e;d=this.markers,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.showMarker(a));return e},c.prototype.showMarker=function(a){return a.serviceObject.setOptions({visible:!0})},c.prototype.hideMarkers=function(){var a,b,c,d,e;d=this.markers,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.hideMarker(a));return e},c.prototype.hideMarker=function(a){return a.serviceObject.setOptions({visible:!1})},c.prototype.extendBoundsWithMarkers=function(){var a,b,c,d,e;a=[],e=this.markers;for(c=0,d=e.length;c<d;c++)b=e[c],a.push(b.serviceObject.getLocation());return this.boundsObject=Microsoft.Maps.LocationRect.fromLocations(a)},c.prototype.createClusterer=function(a){},c.prototype.clearClusterer=function(){},c.prototype.clusterize=function(){},c.prototype.createInfoWindow=function(a){var b;if(a.description!=null)return this.markers_conf.infobox==="description"?a.info_window=new Microsoft.Maps.Infobox(a.serviceObject.getLocation(),{description:a.description,visible:!1,showCloseButton:!0}):a.info_window=new Microsoft.Maps.Infobox(a.serviceObject.getLocation(),{htmlContent:a.description,visible:!1}),b=this,Microsoft.Maps.Events.addHandler(a.serviceObject,"click",this.openInfoWindow(b,a.info_window)),this.addToMap(a.info_window)},c.prototype.openInfoWindow=function(a,b){return function(){return a.visibleInfoWindow&&a.visibleInfoWindow.setOptions({visible:!1}),b.setOptions({visible:!0}),a.visibleInfoWindow=b}},c.prototype.fitBounds=function(){return this.map.setView({bounds:this.boundsObject})},c.prototype.addToMap=function(a){return this.map.entities.push(a)},c.prototype.removeFromMap=function(a){return this.map.entities.remove(a)},c.prototype.centerMapOnUser=function(){return this.map.setView({center:this.userLocation})},c}(Gmaps4Rails)})).call(this)