(function(a){a.fn.electricSlide=function(b){function c(a,b){return!0}var d={slideClass:"slide",shouldInsertHeader:!0,shouldInsertFooter:!0,slideHeaderClass:"slide-header",slideFooterClass:"slide-footer",titleSelector:"h3",nextHtml:"<a href='#' class='slide-navigation next'>next</a>",previousHtml:"<a href='#' class='slide-navigation previous'>previous</a>",buildToc:!0,tocContainerSelector:"#table-of-contents",showFunction:function(){a(this).show()},hideFunction:function(){a(this).hide()},slideShouldShow:c,slideWillShow:c,slideDidShow:c,slideShouldHide:c,slideWillHide:c,slideDidHide:c,toggleSelector:".slide-toggle"};return a.extend(d,b),d.slideSelector="."+d.slideClass,d.slideHeaderSelector="."+d.slideHeaderClass,d.slideFooterSelector="."+d.slideFooterClass,this.each(function(){function k(b){var c=a(b).height(),d=a(b).margin(),e=d.top,f=d.bottom,g=a(b).padding(),h=g.top,i=g.bottom,k=a(b).border(),l=k.top,m=k.bottom,n=c+e+f+h+i+l+m;n>j&&(j=n)}function l(a){j=0,maxTopMargin=0,maxBottomMargin=0,maxTopPadding=0,maxBottomPadding=0,maxTopBorder=0,maxBottomBorder=0,e.each(function(){k(this)}),o(a)}function m(){return c.width()}function n(){return j}function o(a){typeof a=="number"?c.animate({height:n()},a):c.height(n())}function p(){return e.size()-1}function q(b){var c=f,d=e[f],g=e[b];if(!g||c==b)return!1;if(!d.shouldHide(c,b))return!1;d.willHide(c,b),a(d).stop(),d.hide(c,b),d.didHide(c,b);if(!g.shouldShow(c,b))return!1;g.willShow(c,b),g.show(c,b),g.didShow(c,b),f=b,typeof activateCurrentTocLine!="undefined"&&activateCurrentTocLine()}function r(){return newSlidePosition=f+1,newSlidePosition<=p()&&q(newSlidePosition),!1}function s(){return newSlidePosition=f-1,newSlidePosition>=0&&q(newSlidePosition),!1}function t(a){var b=a.pageX-this.offsetLeft;b<m()/2?s():r()}function u(b,c){var e=a("<div><div class='clear-slide-header'></div></div>'"),f;if(b<p()){f=b+1;var h=a(d.nextHtml);g[f]&&h.text(f+1+". "+a(g[f]).text()),e.prepend(h)}if(b>0){f=b-1;var i=a(d.previousHtml);g[f]&&i.text(f+1+". "+a(g[f]).text()),e.prepend(i)}if(d.shouldInsertFooter){var j=e.clone();j.addClass(d.slideFooterClass),a(c).append(j)}d.shouldInsertHeader&&(e.addClass(d.slideHeaderClass),a(c).prepend(e)),a(".slide-navigation.next",c).click(r),a(".slide-navigation.previous",c).click(s)}function v(){h=a(d.tocContainerSelector),i=a("<ol class='slide-toc'></ol>"),g.each(function(b){line=a("<li><a href='#slide-"+b+"'>"+a(this).text()+"</a></li>"),a("a",line).click(function(){q(b)}),i.append(line)}),h.append(i),this.activateCurrentTocLine=function(){i.children("li.active").removeClass("active"),i.children("li:eq("+f+")").addClass("active")}}function w(){return e.show(),e.children(d.slideHeaderSelector+","+d.slideFooterSelector).hide(),c.animate({height:a(".track",c).height()}),!1}function x(){return e.children(d.slideHeaderSelector+","+d.slideFooterSelector).show(),e.hide(),a(e[0]).show(),l(400),!1}var b=this,c=a(this),e=a(d.slideSelector,c),f=0,g=a(d.slideSelector+" > "+d.titleSelector),h,i,j=0,y={slides:e,settings:d,expandAll:w,collapseAll:x,resetDimensions:l,showSlide:q,showNextSlide:r,showPreviousSlide:s};this.electricSlide=y,e.each(function(b){(d.shouldInsertHeader||d.shouldInsertFooter)&&u(b,this),k(this),b==0&&a(this).show(),this.electricSlide=y,this.show=d.showFunction,this.hide=d.hideFunction,this.shouldShow=d.slideShouldShow,this.willShow=d.slideWillShow,this.didShow=d.slideDidShow,this.shouldHide=d.slideShouldHide,this.willHide=d.slideWillHide,this.didHide=d.slideDidHide}),o(),a(window).resize(l),d.buildToc&&v(),activateCurrentTocLine(),a(d.toggleSelector,this).toggle(w,x)}),this}})(jQuery)